<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>Dashboard</h1>
  <button onclick="localStorage.removeItem('token'); window.location.href='/'">Logout</button>

  <h2>Create Profile</h2>
  <form id="profileForm">
    <input type="text" id="name" placeholder="Name" required>
    <input type="text" id="platform" placeholder="Platform (e.g., Twitch)" required>
    <input type="text" id="contentType" placeholder="Content Type (e.g., Gaming)" required>
    <textarea id="bio" placeholder="Bio"></textarea>
    <button type="submit">Create Profile</button>
  </form>

  <h2>Your Profiles</h2>
  <div id="profiles"></div>

  <script>
    // Fetch and display profiles
    async function loadProfiles() {
      const response = await fetch('/api/profiles', {
        headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` },
      });
      const profiles = await response.json();
      const profilesDiv = document.getElementById('profiles');
      profilesDiv.innerHTML = '';
      profiles.forEach(profile => {
        const div = document.createElement('div');
        div.innerHTML = `
          <h3>${profile.name}</h3>
          <p>Platform: ${profile.platform}</p>
          <p>Content Type: ${profile.contentType}</p>
          <p>Bio: ${profile.bio || 'No bio'}</p>
          <button onclick="updateProfile('${profile._id}')">Update</button>
          <button onclick="deleteProfile('${profile._id}')">Delete</button>
        `;
        profilesDiv.appendChild(div);
      });
    }

    // Create Profile
    document.getElementById('profileForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const profile = {
        name: document.getElementById('name').value,
        platform: document.getElementById('platform').value,
        contentType: document.getElementById('contentType').value,
        bio: document.getElementById('bio').value,
      };

      await fetch('/api/profiles', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('token')}`,
        },
        body: JSON.stringify(profile),
      });
      loadProfiles();
    });

    // Update Profile (Prompt-based for simplicity)
    async function updateProfile(id) {
      const name = prompt('Enter new name:');
      const platform = prompt('Enter new platform:');
      const contentType = prompt('Enter new content type:');
      const bio = prompt('Enter new bio:');
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('token')}`,
        },
        body: JSON.stringify({ name, platform, contentType, bio }),
      });
      loadProfiles();
    }

    // Delete Profile
    async function deleteProfile(id) {
      await fetch(`/api/profiles/${id}`, {
        method: 'DELETE',
        headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` },
      });
      loadProfiles();
    }

    // Load profiles on page load
    loadProfiles();
  //</script>
    //  await fetch(`/api/profiles/${id}`, {
      method: 'PUT',

</body>
</html>